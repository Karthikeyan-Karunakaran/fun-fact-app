pipeline:
  agent:
    any:
  stages:
    - stage: "Clone Repository"
      steps:
        - sh "rm -rf fun-fact-app && git clone https://github.com/Karthikeyan-Karunakaran/fun-fact-app.git"

    - stage: "Build Docker Image"
      steps:
        - sh "cd fun-fact-app && docker build -t fun-fact-app1 ."

    - stage: "Run Docker Container"
      steps:
        - sh "docker stop fun-fact-container1 || true && docker rm fun-fact-container1 || true"
        - sh "docker run -d --name fun-fact-container1 -p 81:8080 fun-fact-app1"
